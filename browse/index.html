<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no,maximum-scale=1.0">
    <title>iq4u8 SERVER</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --bg: #06080f;
            --bg2: #0d1117;
            --card: #161b22;
            --inp: #1c2333;
            --bdr: rgba(255, 255, 255, .06);
            --tx: #e6edf3;
            --txd: #7d8590;
            --ac: #6366f1;
            --acs: rgba(99, 102, 241, .12);
            --gn: #3fb950;
            --rd: #f85149;
            --yl: #d29922;
            --sw: 220px
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--tx);
            height: 100vh;
            overflow: hidden
        }

        ::-webkit-scrollbar {
            width: 5px;
            height: 5px
        }

        ::-webkit-scrollbar-track {
            background: transparent
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, .1);
            border-radius: 3px
        }

        .bgx {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none
        }

        .bgx::before {
            content: '';
            position: absolute;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(99, 102, 241, .07), transparent 70%);
            top: -200px;
            left: -200px
        }

        /* LOGIN */
        .lw {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            position: relative;
            z-index: 1
        }

        .lc {
            background: var(--card);
            border: 1px solid var(--bdr);
            border-radius: 18px;
            padding: 36px 32px;
            width: 380px;
            max-width: 92vw
        }

        .ll {
            text-align: center;
            margin-bottom: 24px
        }

        .ll .ic {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 14px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            margin-bottom: 10px;
            box-shadow: 0 6px 20px rgba(99, 102, 241, .25)
        }

        .ll h1 {
            font-size: 20px;
            font-weight: 800
        }

        .ll p {
            color: var(--txd);
            font-size: 12px;
            margin-top: 3px
        }

        .ts {
            display: flex;
            background: var(--inp);
            border-radius: 9px;
            padding: 3px;
            margin-bottom: 20px
        }

        .ts button {
            flex: 1;
            padding: 8px;
            background: 0;
            border: 0;
            color: var(--txd);
            font-family: inherit;
            font-weight: 600;
            font-size: 12px;
            border-radius: 7px;
            cursor: pointer;
            transition: .3s
        }

        .ts button.a {
            background: var(--ac);
            color: #fff
        }

        .fg {
            margin-bottom: 14px
        }

        .fg label {
            display: block;
            font-size: 10px;
            font-weight: 700;
            color: var(--txd);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: .5px
        }

        .fg input {
            width: 100%;
            padding: 10px 12px;
            background: var(--inp);
            border: 1px solid var(--bdr);
            border-radius: 9px;
            color: var(--tx);
            font-family: inherit;
            font-size: 13px;
            outline: 0;
            transition: .3s
        }

        .fg input:focus {
            border-color: var(--ac)
        }

        .bgo {
            width: 100%;
            padding: 11px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border: 0;
            border-radius: 9px;
            color: #fff;
            font-family: inherit;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: .3s
        }

        .bgo:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(99, 102, 241, .3)
        }

        .bgo:disabled {
            opacity: .5;
            cursor: not-allowed;
            transform: none
        }

        .em {
            background: rgba(248, 81, 73, .1);
            border: 1px solid rgba(248, 81, 73, .3);
            color: #fca5a5;
            padding: 8px 10px;
            border-radius: 7px;
            font-size: 11px;
            margin-bottom: 12px;
            display: none
        }

        .tc {
            font-size: 11px;
            color: var(--txd);
            margin-bottom: 14px;
            display: none;
            align-items: center;
            gap: 6px
        }

        .tc a {
            color: var(--ac)
        }

        /* PENDING */
        .pending-box {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            text-align: center;
            position: relative;
            z-index: 1;
            padding: 20px
        }

        .pending-box .pb-icon {
            font-size: 60px;
            margin-bottom: 16px
        }

        .pending-box h2 {
            font-size: 22px;
            margin-bottom: 8px
        }

        .pending-box p {
            color: var(--txd);
            max-width: 400px;
            font-size: 14px;
            line-height: 1.6
        }

        /* ALERT BANNER */
        .alert-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 10px 16px;
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: space-between;
            font-size: 13px;
            font-weight: 600
        }

        .alert-bar.warning {
            background: #3d2e0a;
            color: #f5c842;
            border-bottom: 2px solid #d29922
        }

        .alert-bar.info {
            background: #1e1e3f;
            color: #a5b4fc;
            border-bottom: 2px solid #6366f1
        }

        .alert-bar.sh {
            display: flex
        }

        .alert-x {
            background: 0;
            border: 0;
            color: inherit;
            font-size: 16px;
            cursor: pointer;
            padding: 0 4px
        }

        /* APP */
        .app {
            display: none;
            height: 100vh;
            position: relative;
            z-index: 1
        }

        .app.sh {
            display: flex
        }

        .sb {
            width: var(--sw);
            background: var(--bg2);
            border-right: 1px solid var(--bdr);
            display: flex;
            flex-direction: column;
            flex-shrink: 0
        }

        .sbr {
            padding: 16px 14px;
            border-bottom: 1px solid var(--bdr);
            display: flex;
            align-items: center;
            gap: 8px
        }

        .sbr .ic {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0
        }

        .sbr h2 {
            font-size: 14px;
            font-weight: 800;
            white-space: nowrap
        }

        .sbn {
            flex: 1;
            padding: 10px 8px;
            display: flex;
            flex-direction: column;
            gap: 3px;
            overflow-y: auto
        }

        .ni {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 9px 12px;
            border-radius: 9px;
            cursor: pointer;
            transition: .2s;
            font-size: 13px;
            font-weight: 600;
            color: var(--txd);
            border: 0;
            background: 0;
            width: 100%;
            text-align: left;
            font-family: inherit
        }

        .ni:hover {
            background: var(--acs);
            color: var(--tx)
        }

        .ni.a {
            background: var(--acs);
            color: var(--ac)
        }

        .ni .nx {
            font-size: 16px;
            width: 22px;
            text-align: center
        }

        .res {
            padding: 10px 12px;
            border-top: 1px solid var(--bdr)
        }

        .res-t {
            font-size: 9px;
            font-weight: 700;
            color: var(--txd);
            text-transform: uppercase;
            letter-spacing: .5px;
            margin-bottom: 6px
        }

        .rb {
            margin-bottom: 8px
        }

        .rb-h {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: var(--txd);
            margin-bottom: 3px
        }

        .rb-bar {
            height: 4px;
            background: var(--inp);
            border-radius: 3px;
            overflow: hidden
        }

        .rb-fill {
            height: 100%;
            border-radius: 3px;
            transition: .5s;
            background: var(--ac)
        }

        .rb-fill.warn {
            background: var(--rd)
        }

        .sbf {
            padding: 10px 12px;
            border-top: 1px solid var(--bdr)
        }

        .ub {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 10px;
            background: var(--inp);
            border-radius: 8px;
            margin-bottom: 6px
        }

        .ua {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 7px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            flex-shrink: 0
        }

        .un {
            font-size: 12px;
            font-weight: 700
        }

        .ur {
            font-size: 10px;
            color: var(--txd)
        }

        .plan-badge {
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 4px;
            background: var(--acs);
            color: var(--ac);
            font-weight: 700;
            text-transform: uppercase;
            margin-left: 4px
        }

        .bo {
            width: 100%;
            padding: 7px;
            background: rgba(248, 81, 73, .08);
            border: 1px solid rgba(248, 81, 73, .2);
            border-radius: 7px;
            color: #f85149;
            font-family: inherit;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: .2s
        }

        .bo:hover {
            background: rgba(248, 81, 73, .15)
        }

        /* MAIN */
        .mn {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden
        }

        .mh {
            padding: 12px 20px;
            border-bottom: 1px solid var(--bdr);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg2);
            flex-shrink: 0
        }

        .mh h2 {
            font-size: 15px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 7px
        }

        .mh .bd {
            padding: 2px 8px;
            border-radius: 5px;
            font-size: 9px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: .5px
        }

        .bdg {
            background: rgba(63, 185, 80, .12);
            color: #3fb950
        }

        .bdb {
            background: rgba(88, 166, 255, .12);
            color: #58a6ff
        }

        .bdr2 {
            background: rgba(248, 81, 73, .12);
            color: #f85149
        }

        .mh-actions {
            display: flex;
            gap: 6px
        }

        .mh-btn {
            padding: 5px 10px;
            background: var(--inp);
            border: 1px solid var(--bdr);
            border-radius: 7px;
            color: var(--tx);
            font-family: inherit;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: .2s;
            display: flex;
            align-items: center;
            gap: 4px
        }

        .mh-btn:hover {
            border-color: var(--ac);
            color: var(--ac)
        }

        .pn {
            flex: 1;
            overflow: auto;
            display: none;
            -webkit-overflow-scrolling: touch
        }

        .pn.a {
            display: flex;
            flex-direction: column
        }

        /* UPLOAD PROGRESS */
        .upload-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(6, 8, 15, .85);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 16px
        }

        .upload-overlay.sh {
            display: flex
        }

        .upload-box {
            background: var(--card);
            border: 1px solid var(--bdr);
            border-radius: 16px;
            padding: 32px 40px;
            text-align: center;
            min-width: 280px
        }

        .upload-box h3 {
            font-size: 16px;
            margin-bottom: 12px
        }

        .upload-bar {
            width: 100%;
            height: 8px;
            background: var(--inp);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px
        }

        .upload-fill {
            height: 100%;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
            border-radius: 4px;
            transition: width .3s;
            width: 0
        }

        .upload-pct {
            font-size: 13px;
            color: var(--txd);
            font-weight: 600
        }

        #tbox {
            flex: 1;
            background: #000;
            padding: 3px
        }

        /* FILE MANAGER */
        .fb {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 16px;
            background: var(--card);
            border-bottom: 1px solid var(--bdr);
            flex-wrap: wrap;
            flex-shrink: 0
        }

        .fbc {
            display: flex;
            align-items: center;
            gap: 3px;
            flex: 1;
            min-width: 120px;
            flex-wrap: wrap
        }

        .fc {
            padding: 3px 8px;
            background: var(--inp);
            border-radius: 5px;
            font-size: 11px;
            cursor: pointer;
            border: 0;
            color: var(--tx);
            font-family: inherit;
            font-weight: 600;
            transition: .2s
        }

        .fc:hover {
            background: var(--ac)
        }

        .fbs {
            display: flex;
            gap: 4px;
            flex-wrap: wrap
        }

        .fb2 {
            padding: 5px 10px;
            background: var(--inp);
            border: 1px solid var(--bdr);
            border-radius: 7px;
            color: var(--tx);
            font-family: inherit;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: .2s;
            display: flex;
            align-items: center;
            gap: 4px
        }

        .fb2:hover {
            border-color: var(--ac)
        }

        .fb2.danger {
            color: var(--rd)
        }

        .fb2.danger:hover {
            border-color: var(--rd)
        }

        .bulk-bar {
            display: none;
            padding: 8px 16px;
            background: rgba(99, 102, 241, .08);
            border-bottom: 1px solid rgba(99, 102, 241, .2);
            align-items: center;
            gap: 8px;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0
        }

        .bulk-bar.sh {
            display: flex
        }

        .dz {
            padding: 20px;
            text-align: center;
            border: 2px dashed var(--bdr);
            margin: 10px 14px;
            border-radius: 12px;
            color: var(--txd);
            font-size: 12px;
            transition: .3s;
            cursor: pointer;
            flex-shrink: 0
        }

        .dz.ov {
            border-color: var(--ac);
            background: var(--acs);
            color: var(--ac)
        }

        .dz .di {
            font-size: 26px;
            display: block;
            margin-bottom: 5px
        }

        .fl {
            flex: 1;
            overflow: auto;
            padding: 4px 12px
        }

        .fi {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 7px;
            cursor: pointer;
            transition: .15s;
            gap: 10px
        }

        .fi:hover {
            background: var(--acs)
        }

        .fi.selected {
            background: rgba(99, 102, 241, .15);
            border: 1px solid rgba(99, 102, 241, .2)
        }

        .fi-check {
            width: 18px;
            height: 18px;
            border: 2px solid var(--bdr);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: .2s;
            font-size: 10px
        }

        .fi-check.checked {
            background: var(--ac);
            border-color: var(--ac);
            color: #fff
        }

        .fii {
            width: 32px;
            height: 32px;
            border-radius: 7px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0
        }

        .fii.d {
            background: rgba(210, 153, 34, .12)
        }

        .fii.f {
            background: rgba(88, 166, 255, .12)
        }

        .fin {
            flex: 1;
            min-width: 0
        }

        .fn {
            font-weight: 600;
            font-size: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis
        }

        .fm {
            font-size: 10px;
            color: var(--txd);
            margin-top: 1px
        }

        .fa {
            display: flex;
            gap: 3px;
            opacity: 0;
            transition: .2s
        }

        .fi:hover .fa {
            opacity: 1
        }

        .fab {
            width: 24px;
            height: 24px;
            border-radius: 5px;
            border: 1px solid var(--bdr);
            background: var(--inp);
            color: var(--tx);
            cursor: pointer;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: .2s
        }

        .fab:hover {
            border-color: var(--ac)
        }

        .fab.x:hover {
            border-color: var(--rd);
            color: var(--rd)
        }

        .es {
            padding: 40px 16px;
            text-align: center;
            color: var(--txd)
        }

        .es .ei {
            font-size: 34px;
            display: block;
            margin-bottom: 10px
        }

        /* SETTINGS */
        .sg {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 10px;
            padding: 16px
        }

        .sc {
            background: var(--inp);
            border: 1px solid var(--bdr);
            border-radius: 10px;
            padding: 12px;
            transition: .3s
        }

        .sc:hover {
            transform: translateY(-1px)
        }

        .sl {
            font-size: 9px;
            font-weight: 700;
            color: var(--txd);
            text-transform: uppercase;
            letter-spacing: .5px;
            margin-bottom: 4px
        }

        .sv {
            font-size: 16px;
            font-weight: 800
        }

        .ss {
            font-size: 10px;
            color: var(--txd);
            margin-top: 2px
        }

        .chart-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            padding: 16px
        }

        .chart-card {
            background: var(--inp);
            border: 1px solid var(--bdr);
            border-radius: 12px;
            padding: 16px
        }

        .chart-card h4 {
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--txd);
            text-transform: uppercase;
            letter-spacing: .5px
        }

        /* ADMIN */
        .admin-section {
            padding: 16px
        }

        .admin-section h3 {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px
        }

        .admin-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 16px;
            background: var(--inp);
            border-radius: 9px;
            padding: 3px
        }

        .admin-tab {
            flex: 1;
            padding: 8px;
            background: 0;
            border: 0;
            color: var(--txd);
            font-family: inherit;
            font-weight: 600;
            font-size: 12px;
            border-radius: 7px;
            cursor: pointer;
            transition: .3s;
            text-align: center
        }

        .admin-tab.a {
            background: var(--ac);
            color: #fff
        }

        .user-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px
        }

        .user-table th {
            text-align: left;
            padding: 8px 10px;
            font-size: 10px;
            font-weight: 700;
            color: var(--txd);
            text-transform: uppercase;
            letter-spacing: .5px;
            border-bottom: 1px solid var(--bdr)
        }

        .user-table td {
            padding: 8px 10px;
            border-bottom: 1px solid var(--bdr)
        }

        .user-table tr:hover td {
            background: var(--acs)
        }

        .status-badge {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase
        }

        .status-badge.approved {
            background: rgba(63, 185, 80, .12);
            color: #3fb950
        }

        .status-badge.pending {
            background: rgba(210, 153, 34, .12);
            color: #d29922
        }

        .tbtn {
            padding: 4px 10px;
            border-radius: 5px;
            border: 1px solid var(--bdr);
            background: var(--inp);
            color: var(--tx);
            font-family: inherit;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: .2s
        }

        .tbtn:hover {
            border-color: var(--ac)
        }

        .tbtn.green {
            color: var(--gn)
        }

        .tbtn.green:hover {
            border-color: var(--gn)
        }

        .tbtn.red {
            color: var(--rd)
        }

        .tbtn.red:hover {
            border-color: var(--rd)
        }

        .ip-list {
            list-style: none
        }

        .ip-list li {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 10px;
            border-bottom: 1px solid var(--bdr);
            font-size: 12px
        }

        .alert-form textarea {
            width: 100%;
            padding: 10px;
            background: var(--inp);
            border: 1px solid var(--bdr);
            border-radius: 9px;
            color: var(--tx);
            font-family: inherit;
            font-size: 13px;
            resize: vertical;
            min-height: 60px;
            outline: 0
        }

        .alert-form textarea:focus {
            border-color: var(--ac)
        }

        .alert-form select {
            padding: 8px;
            background: var(--inp);
            border: 1px solid var(--bdr);
            border-radius: 7px;
            color: var(--tx);
            font-family: inherit;
            font-size: 12px;
            outline: 0
        }

        /* PLANS */
        .plan-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            padding: 16px;
            overflow-y: auto;
            max-height: 100%;
            padding-bottom: 40px
        }

        .plan-card {
            background: var(--card);
            border: 1px solid var(--bdr);
            border-radius: 14px;
            padding: 24px;
            text-align: center;
            transition: .3s;
            position: relative;
            overflow: hidden
        }

        .plan-card:hover {
            border-color: var(--ac);
            transform: translateY(-2px)
        }

        .plan-card.current {
            border-color: var(--gn);
            box-shadow: 0 0 20px rgba(63, 185, 80, .1)
        }

        .plan-card .plan-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--gn);
            color: #000;
            font-size: 10px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 20px
        }

        .plan-card h3 {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 4px
        }

        .plan-card .plan-price {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 12px 0
        }

        .plan-card .plan-features {
            list-style: none;
            text-align: left;
            font-size: 12px;
            color: var(--txd);
            margin-bottom: 16px
        }

        .plan-card .plan-features li {
            padding: 6px 0;
            border-bottom: 1px solid var(--bdr);
            display: flex;
            align-items: center;
            gap: 8px
        }

        .plan-card .plan-features li::before {
            content: 'âœ“';
            color: var(--gn);
            font-weight: 700
        }

        .plan-buy {
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border: 0;
            border-radius: 9px;
            color: #fff;
            font-family: inherit;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            transition: .3s
        }

        .plan-buy:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(99, 102, 241, .3)
        }

        .plan-buy.current-btn {
            background: var(--inp);
            color: var(--gn);
            cursor: default
        }

        /* CONTACT */
        .contact-section {
            padding: 16px
        }

        .contact-card {
            background: var(--card);
            border: 1px solid var(--bdr);
            border-radius: 14px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 12px;
            transition: .3s;
            cursor: pointer;
            text-decoration: none;
            color: var(--tx)
        }

        .contact-card:hover {
            border-color: var(--ac);
            transform: translateY(-2px)
        }

        .contact-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0
        }

        .contact-icon.wa {
            background: rgba(37, 211, 102, .15);
            color: #25D366
        }

        .contact-icon.tg {
            background: rgba(0, 136, 204, .15);
            color: #0088CC
        }

        .contact-info h4 {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 2px
        }

        .contact-info p {
            font-size: 12px;
            color: var(--txd)
        }

        /* SUPPORT CONFIG */
        .support-form {
            padding: 0
        }

        .support-form .fg {
            margin-bottom: 14px
        }

        .support-form input {
            width: 100%;
            padding: 10px 12px;
            background: var(--inp);
            border: 1px solid var(--bdr);
            border-radius: 9px;
            color: var(--tx);
            font-family: inherit;
            font-size: 13px;
            outline: 0
        }

        /* MODAL */
        .mo {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, .65);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999
        }

        .mo.sh {
            display: flex
        }

        .mb {
            background: var(--card);
            border: 1px solid var(--bdr);
            border-radius: 14px;
            padding: 24px;
            width: 340px;
            max-width: 90vw
        }

        .mb h3 {
            font-size: 14px;
            margin-bottom: 12px
        }

        .mb input,
        .mb select {
            width: 100%;
            padding: 9px 12px;
            background: var(--inp);
            border: 1px solid var(--bdr);
            border-radius: 7px;
            color: var(--tx);
            font-family: inherit;
            font-size: 12px;
            outline: 0;
            margin-bottom: 12px
        }

        .mb input:focus {
            border-color: var(--ac)
        }

        .ma {
            display: flex;
            gap: 6px;
            justify-content: flex-end
        }

        .ma button {
            padding: 7px 14px;
            border-radius: 7px;
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            font-size: 12px;
            border: 1px solid var(--bdr)
        }

        .ma .c {
            background: var(--inp);
            color: var(--tx)
        }

        .ma .k {
            background: var(--ac);
            color: #fff;
            border-color: transparent
        }

        #finp {
            display: none
        }

        /* TOAST */
        .toast-box {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 99999;
            display: flex;
            flex-direction: column;
            gap: 6px;
            pointer-events: none
        }

        .toast {
            pointer-events: auto;
            padding: 10px 16px;
            border-radius: 9px;
            font-size: 12px;
            font-weight: 600;
            color: #fff;
            animation: toastIn .3s ease, toastOut .3s ease 2.2s forwards;
            display: flex;
            align-items: center;
            gap: 6px;
            max-width: 320px;
            box-shadow: 0 6px 24px rgba(0, 0, 0, .4)
        }

        .toast.success {
            background: #22c55e
        }

        .toast.error {
            background: #ef4444
        }

        .toast.info {
            background: #6366f1
        }

        .toast.warning {
            background: #eab308;
            color: #000
        }

        @keyframes toastIn {
            from {
                opacity: 0;
                transform: translateY(20px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes toastOut {
            from {
                opacity: 1
            }

            to {
                opacity: 0;
                transform: translateY(-10px)
            }
        }

        /* MOBILE */
        @media(max-width:700px) {
            .app.sh {
                flex-direction: column
            }

            .sb {
                width: 100%;
                height: auto;
                border-right: none;
                border-top: 1px solid var(--bdr);
                order: 2;
                flex-direction: row;
                overflow: visible;
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                z-index: 100;
                background: var(--bg2)
            }

            .sbr {
                display: none
            }

            .sbn {
                flex-direction: row;
                overflow-x: auto;
                overflow-y: hidden;
                gap: 0;
                padding: 4px 2px;
                flex: 1;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none
            }

            .sbn::-webkit-scrollbar {
                display: none
            }

            .ni {
                flex-direction: column;
                padding: 6px 8px;
                gap: 2px;
                font-size: 9px;
                min-width: 48px;
                text-align: center;
                border-radius: 8px;
                flex-shrink: 0
            }

            .ni .nx {
                font-size: 18px;
                width: auto
            }

            .ni span:not(.nx) {
                display: block;
                font-size: 8px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 50px
            }

            .res,
            .sbf {
                display: none
            }

            .mn {
                order: 1;
                flex: 1;
                min-height: 0;
                overflow: hidden;
                padding-bottom: 64px
            }

            .mh {
                padding: 8px 12px
            }

            .mh h2 {
                font-size: 13px
            }

            .mh .bd {
                font-size: 8px;
                padding: 2px 6px
            }

            .mh-actions {
                gap: 3px
            }

            .mh-btn {
                padding: 3px 6px;
                font-size: 10px
            }

            .pn {
                min-height: 0;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch
            }

            .lc {
                width: 92vw;
                padding: 24px 18px
            }

            .ll .ic {
                width: 40px;
                height: 40px;
                font-size: 18px
            }

            .ll h1 {
                font-size: 17px
            }

            .ll p {
                font-size: 11px
            }

            .fb {
                padding: 6px 8px;
                gap: 4px
            }

            .fb2 {
                padding: 4px 7px;
                font-size: 10px
            }

            .fc {
                padding: 3px 6px;
                font-size: 10px
            }

            .dz {
                padding: 12px;
                margin: 6px 8px;
                font-size: 10px
            }

            .dz .di {
                font-size: 18px;
                margin-bottom: 3px
            }

            .fl {
                padding: 3px 6px
            }

            .fi {
                padding: 6px 8px;
                gap: 6px
            }

            .fii {
                width: 26px;
                height: 26px;
                font-size: 12px;
                border-radius: 5px
            }

            .fn {
                font-size: 11px
            }

            .fm {
                font-size: 9px
            }

            .fab {
                width: 22px;
                height: 22px;
                font-size: 9px
            }

            .fa {
                opacity: 1
            }

            .bulk-bar {
                font-size: 10px;
                padding: 6px 8px
            }

            .sg {
                grid-template-columns: repeat(2, 1fr);
                gap: 6px;
                padding: 8px;
                overflow: visible
            }

            .sc {
                padding: 8px;
                border-radius: 8px
            }

            .sl {
                font-size: 8px
            }

            .sv {
                font-size: 12px
            }

            .ss {
                font-size: 8px
            }

            #p-settings {
                overflow-y: auto !important;
                padding-bottom: 80px
            }

            .chart-row {
                grid-template-columns: 1fr;
                padding: 8px;
                gap: 8px
            }

            #p-terminal {
                flex: 1;
                display: flex !important;
                flex-direction: column
            }

            #p-terminal.a {
                display: flex !important
            }

            #tbox {
                flex: 1;
                min-height: calc(100vh - 180px);
                width: 100%
            }

            #p-plans {
                overflow-y: auto !important
            }

            .plan-grid {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 12px;
                padding-bottom: 100px;
                overflow: visible !important;
                max-height: none !important
            }

            .plan-card {
                overflow: visible !important;
                margin-bottom: 8px
            }

            .plan-buy {
                position: relative;
                z-index: 1
            }

            #p-admin {
                overflow-y: auto !important;
                padding-bottom: 80px
            }

            .admin-section {
                padding: 8px;
                overflow-x: auto
            }

            .user-table {
                font-size: 10px;
                min-width: 600px
            }

            .user-table th,
            .user-table td {
                padding: 5px 4px;
                white-space: nowrap
            }

            #p-contact {
                overflow-y: auto !important;
                padding-bottom: 80px
            }

            .contact-card {
                padding: 14px;
                gap: 12px
            }

            .contact-icon {
                width: 40px;
                height: 40px;
                font-size: 20px
            }

            .upload-box {
                min-width: 240px;
                padding: 24px 20px
            }
        }
    </style>
</head>

<body>
    <div class="bgx"></div>
    <!-- ALERT -->
    <div class="alert-bar warning" id="alertBar"><span id="alertMsg"></span><button class="alert-x"
            onclick="closeAlert()">âœ•</button></div>
    <div class="toast-box" id="toastBox"></div>
    <!-- LOGIN -->
    <div class="lw" id="lp">
        <div class="lc">
            <div class="ll">
                <div class="ic">âš¡</div>
                <h1>iq4u8 SERVER</h1>
                <p>Multi-User VPS Dashboard</p>
            </div>
            <div class="ts"><button class="a" onclick="stab('login')">Login</button><button
                    onclick="stab('signup')">Sign Up</button></div>
            <div class="em" id="aErr"></div>
            <form onsubmit="doAuth(event)">
                <div class="fg"><label>Username</label><input type="text" id="aU" placeholder="Username" required></div>
                <div class="fg"><label>Password</label><input type="password" id="aP" placeholder="Password" required>
                </div>
                <div class="tc" id="tcBox"><input type="checkbox" id="agreeTC"><span>I agree to the <a href="#"
                            onclick="alert('Terms: Use responsibly. No illegal activity.');return false">Terms</a></span>
                </div>
                <button type="submit" class="bgo" id="aB">Login</button>
            </form>
        </div>
    </div>
    <!-- PENDING (legacy fallback) -->
    <div class="pending-box" id="pendingPage" style="display:none">
        <div class="pb-icon">â³</div>
        <h2>Account Pending Approval</h2>
        <p>Your account is waiting for admin approval. If not approved within <strong>6 hours</strong>, it will be
            auto-deleted.</p>
        <button class="bgo" style="margin-top:20px;width:auto;padding:10px 24px" onclick="doLogout()">Back to
            Login</button>
    </div>
    <!-- UPLOAD PROGRESS -->
    <div class="upload-overlay" id="uplOverlay">
        <div class="upload-box">
            <h3>â¬†ï¸ Uploading...</h3>
            <div class="upload-bar">
                <div class="upload-fill" id="uplFill"></div>
            </div>
            <div class="upload-pct" id="uplPct">0%</div>
        </div>
    </div>
    <!-- APP -->
    <div class="app" id="app">
        <div class="sb">
            <div class="sbr">
                <div class="ic">âš¡</div>
                <h2>iq4u8</h2>
            </div>
            <div class="sbn">
                <button class="ni a" onclick="sp('terminal',this)"><span
                        class="nx">ðŸ’»</span><span>Terminal</span></button>
                <button class="ni" onclick="sp('files',this)"><span class="nx">ðŸ“‚</span><span>Files</span></button>
                <button class="ni" onclick="sp('settings',this)"><span
                        class="nx">ðŸ“Š</span><span>Settings</span></button>
                <button class="ni" onclick="sp('plans',this)"><span class="nx">ðŸ“‹</span><span>Plans</span></button>
                <button class="ni" onclick="sp('contact',this)"><span class="nx">ðŸ“ž</span><span>Contact</span></button>
                <button class="ni" onclick="sp('admin',this)" id="adminNav" style="display:none"><span
                        class="nx">ðŸ‘‘</span><span>Admin</span></button>
            </div>
            <div class="res" id="resBox">
                <div class="res-t">Resources</div>
                <div class="rb">
                    <div class="rb-h"><span>Storage</span><span id="rbSt">â€”</span></div>
                    <div class="rb-bar">
                        <div class="rb-fill" id="rbSf" style="width:0"></div>
                    </div>
                </div>
                <div class="rb">
                    <div class="rb-h"><span>RAM</span><span id="rbRt">â€”</span></div>
                    <div class="rb-bar">
                        <div class="rb-fill" id="rbRf" style="width:0"></div>
                    </div>
                </div>
                <div class="rb">
                    <div class="rb-h"><span>CPU</span><span id="rbCt">â€”</span></div>
                    <div class="rb-bar">
                        <div class="rb-fill" id="rbCf" style="width:0"></div>
                    </div>
                </div>
            </div>
            <div class="sbf">
                <div class="ub">
                    <div class="ua" id="uA">U</div>
                    <div>
                        <div class="un" id="uN">user</div>
                        <div class="ur" id="uR">user</div>
                    </div>
                </div>
                <button class="bo" onclick="doLogout()">Logout</button>
            </div>
        </div>
        <div class="mn">
            <div class="mh">
                <h2><span id="pI">ðŸ’»</span> <span id="pT">Terminal</span></h2>
                <div class="mh-actions" id="mhActions"></div>
            </div>
            <!-- TERMINAL -->
            <div class="pn a" id="p-terminal">
                <div id="tbox"></div>
            </div>
            <!-- FILES -->
            <div class="pn" id="p-files">
                <div class="fb">
                    <div class="fbc" id="fP"></div>
                    <div class="fbs">
                        <button class="fb2" onclick="toggleSelect()">â˜‘ï¸ Select</button>
                        <button class="fb2" onclick="sMk()">ðŸ“ New</button>
                        <button class="fb2" onclick="document.getElementById('finp').click()">â¬†ï¸ Upload</button>
                        <button class="fb2" onclick="lf()">ðŸ”„</button>
                    </div>
                </div>
                <div class="bulk-bar" id="bulkBar">
                    <span id="bulkCount">0 selected</span>
                    <button class="fb2" onclick="bulkDelete()">ðŸ—‘ï¸ Delete</button>
                    <button class="fb2" onclick="bulkMove()">ðŸ“¦ Move</button>
                    <button class="fb2" onclick="bulkCopy()">ðŸ“‹ Copy</button>
                    <button class="fb2" onclick="selectAll()">Select All</button>
                    <button class="fb2" onclick="toggleSelect()">Cancel</button>
                </div>
                <input type="file" id="finp" multiple onchange="upl(this.files)">
                <div class="dz" id="dZ" ondragover="event.preventDefault();this.classList.add('ov')"
                    ondragleave="this.classList.remove('ov')" ondrop="hDr(event)"><span class="di">ðŸ“¥</span><strong>Drop
                        files here</strong><br><small>All file types supported</small></div>
                <div class="fl" id="fL"></div>
            </div>
            <!-- SETTINGS -->
            <div class="pn" id="p-settings">
                <div class="chart-row" id="chartRow">
                    <div class="chart-card">
                        <h4>CPU Usage</h4><canvas id="cpuChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h4>RAM Usage</h4><canvas id="ramChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h4>Disk Usage</h4><canvas id="diskChart"></canvas>
                    </div>
                </div>
                <div class="sg" id="sG"></div>
                <div id="dangerZone" style="padding:16px;display:none">
                    <div
                        style="border:1px solid rgba(248,81,73,.3);border-radius:12px;padding:16px;background:rgba(248,81,73,.05)">
                        <h4 style="color:#f85149;font-size:13px;margin-bottom:8px">âš ï¸ Danger Zone</h4>
                        <p style="font-size:11px;color:var(--txd);margin-bottom:12px">Once you delete your account, all
                            your files and data will be permanently removed.</p>
                        <button onclick="deleteAccount()"
                            style="padding:8px 16px;background:rgba(248,81,73,.15);border:1px solid rgba(248,81,73,.4);border-radius:8px;color:#f85149;font-family:inherit;font-size:12px;font-weight:700;cursor:pointer">ðŸ—‘ï¸
                            Delete My Account</button>
                    </div>
                </div>
            </div>
            <!-- PLANS -->
            <div class="pn" id="p-plans">
                <div class="plan-grid" id="planGrid"></div>
            </div>
            <!-- CONTACT -->
            <div class="pn" id="p-contact">
                <div class="contact-section" id="contactSection">
                    <h3 style="font-size:16px;font-weight:800;margin-bottom:16px">ðŸ“ž Contact Us</h3>
                    <div id="contactCards">
                        <p style="color:var(--txd);font-size:13px">Loading...</p>
                    </div>
                </div>
            </div>
            <!-- ADMIN -->
            <div class="pn" id="p-admin">
                <div class="admin-section">
                    <div class="admin-tabs">
                        <button class="admin-tab a" onclick="aTab('users',this)">ðŸ‘¥ Users</button>
                        <button class="admin-tab" onclick="aTab('ips',this)">ðŸ›¡ï¸ IPs</button>
                        <button class="admin-tab" onclick="aTab('alerts',this)">ðŸ“¢ Alerts</button>
                        <button class="admin-tab" onclick="aTab('support',this)">ðŸ“ž Support</button>
                    </div>
                    <div id="adminUsers">
                        <div style="overflow-x:auto">
                            <table class="user-table">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>Status</th>
                                        <th>Plan</th>
                                        <th>Storage</th>
                                        <th>IP</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="userTbody"></tbody>
                            </table>
                        </div>
                    </div>
                    <div id="adminIps" style="display:none">
                        <h3>ðŸ›¡ï¸ Banned IPs</h3>
                        <div style="display:flex;gap:6px;margin-bottom:12px"><input type="text" id="banIpInput"
                                placeholder="Enter IP to ban"
                                style="flex:1;padding:8px;background:var(--inp);border:1px solid var(--bdr);border-radius:7px;color:var(--tx);font-family:inherit;font-size:12px;outline:0"><button
                                class="tbtn" onclick="banIp()">Ban IP</button></div>
                        <ul class="ip-list" id="ipList"></ul>
                    </div>
                    <div id="adminAlerts" style="display:none">
                        <h3>ðŸ“¢ Global Alert</h3>
                        <div class="alert-form"><textarea id="alertText"
                                placeholder="Alert message for all users..."></textarea>
                            <div style="display:flex;gap:8px;margin-top:8px"><select id="alertType">
                                    <option value="warning">âš ï¸ Warning</option>
                                    <option value="info">â„¹ï¸ Info</option>
                                </select><button class="tbtn" onclick="setAlert()">Set Alert</button><button
                                    class="tbtn red" onclick="clearAlert()">Clear Alert</button></div>
                        </div>
                    </div>
                    <div id="adminSupport" style="display:none">
                        <h3>ðŸ“ž Support Contact Settings</h3>
                        <div class="support-form">
                            <div class="fg"><label>WhatsApp Number (with country code)</label><input type="text"
                                    id="supportWA" placeholder="+91XXXXXXXXXX"></div>
                            <div class="fg"><label>Telegram Username</label><input type="text" id="supportTG"
                                    placeholder="@username or link"></div>
                            <button class="tbtn green" onclick="saveSupport()" style="padding:8px 20px">ðŸ’¾ Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- MODALS -->
    <div class="mo" id="mkM">
        <div class="mb">
            <h3>ðŸ“ New Folder</h3><input type="text" id="mkN" placeholder="Folder name"
                onkeydown="if(event.key==='Enter')mkGo()">
            <div class="ma"><button class="c" onclick="cMk()">Cancel</button><button class="k"
                    onclick="mkGo()">Create</button></div>
        </div>
    </div>
    <div class="mo" id="renameM">
        <div class="mb">
            <h3>âœï¸ Rename</h3><input type="text" id="renameN" placeholder="New name"
                onkeydown="if(event.key==='Enter')renameGo()">
            <div class="ma"><button class="c"
                    onclick="document.getElementById('renameM').classList.remove('sh')">Cancel</button><button class="k"
                    onclick="renameGo()">Rename</button></div>
        </div>
    </div>
    <div class="mo" id="moveM">
        <div class="mb">
            <h3>ðŸ“¦ Move To</h3><input type="text" id="moveN" placeholder="Destination path (e.g. subfolder)"
                onkeydown="if(event.key==='Enter')moveGo()">
            <div class="ma"><button class="c"
                    onclick="document.getElementById('moveM').classList.remove('sh')">Cancel</button><button class="k"
                    onclick="moveGo()">Move</button></div>
        </div>
    </div>
    <div class="mo" id="copyM">
        <div class="mb">
            <h3>ðŸ“‹ Copy To</h3><input type="text" id="copyN" placeholder="Destination path"
                onkeydown="if(event.key==='Enter')copyGo()">
            <div class="ma"><button class="c"
                    onclick="document.getElementById('copyM').classList.remove('sh')">Cancel</button><button class="k"
                    onclick="copyGo()">Copy</button></div>
        </div>
    </div>
    <div class="mo" id="planM">
        <div class="mb">
            <h3>ðŸ“‹ Change Plan</h3><select id="planSel">
                <option value="free">Free (â‚¹40)</option>
                <option value="pro">Pro (â‚¹70)</option>
                <option value="ultra">Ultra (â‚¹150)</option>
            </select>
            <div class="ma"><button class="c"
                    onclick="document.getElementById('planM').classList.remove('sh')">Cancel</button><button class="k"
                    onclick="changePlanGo()">Change</button></div>
        </div>
    </div>
    <div class="mo" id="passM">
        <div class="mb">
            <h3>ðŸ”‘ Reset Password</h3><input type="password" id="passN" placeholder="New password (6+ chars)">
            <div class="ma"><button class="c"
                    onclick="document.getElementById('passM').classList.remove('sh')">Cancel</button><button class="k"
                    onclick="passGo()">Reset</button></div>
        </div>
    </div>
    <script>
        let user = null, authMode = 'login', curPath = '', term = null, ws = null, fitA = null, authToken = null, selectMode = false, selected = new Set(), renamePath = '', planUser = '', passUser = '', cpuChart = null, ramChart = null, diskChart = null, termFS = false, dataDisp = null;
        const API_BASE = 'https://evidzone-love.hf.space'; function api(u, o = {}) { if (!o.headers) o.headers = {}; if (authToken) o.headers['X-Auth-Token'] = authToken; return fetch(API_BASE + u, o) }
        function fSz(b) { if (!b || b === Infinity) return 'âˆž'; const k = 1024, s = ['B', 'KB', 'MB', 'GB'], i = Math.min(Math.floor(Math.log(b) / Math.log(k)), 3); return (b / Math.pow(k, i)).toFixed(1) + s[i] }
        function toast(msg, type = 'info') { const t = document.createElement('div'); t.className = 'toast ' + type; t.textContent = msg; document.getElementById('toastBox').appendChild(t); setTimeout(() => { try { t.remove() } catch (e) { } }, 2500) }
        // AUTH
        function stab(m) { authMode = m; document.querySelectorAll('.ts button').forEach((b, i) => b.classList.toggle('a', m === 'login' ? i === 0 : i === 1)); document.getElementById('aB').textContent = m === 'login' ? 'Login' : 'Sign Up'; document.getElementById('aErr').style.display = 'none'; document.getElementById('tcBox').style.display = m === 'signup' ? 'flex' : 'none' }
        async function doAuth(e) {
            e.preventDefault(); const u = document.getElementById('aU').value.trim(), p = document.getElementById('aP').value, btn = document.getElementById('aB');
            if (authMode === 'signup' && !document.getElementById('agreeTC').checked) { const el = document.getElementById('aErr'); el.textContent = 'Please agree to Terms & Conditions'; el.style.display = 'block'; return }
            btn.disabled = true; btn.textContent = 'Wait...';
            try {
                const r = await fetch(API_BASE + (authMode === 'login' ? '/api/login' : '/api/signup'), { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ username: u, password: p }) }); const d = await r.json();
                if (d.success && d.token && d.user) {
                    user = d.user; authToken = d.token;
                    localStorage.setItem('token', d.token); localStorage.setItem('user', JSON.stringify(d.user));
                    openApp();
                    if (d.newUser) { const bar = document.getElementById('alertBar'); bar.className = 'alert-bar warning sh'; document.getElementById('alertMsg').textContent = 'âš ï¸ Make payment to activate your account. Contact admin.'; }
                }
                else if (d.pending) { showPending() }
                else if (d.success) { toast(d.message || 'Success!', 'success'); if (authMode === 'signup') stab('login') }
                else { const el = document.getElementById('aErr'); el.textContent = d.error || 'Failed'; el.style.display = 'block' }
            } catch (err) { document.getElementById('aErr').textContent = 'Network error'; document.getElementById('aErr').style.display = 'block' }
            btn.disabled = false; btn.textContent = authMode === 'login' ? 'Login' : 'Sign Up'
        }
        function showPending() { document.getElementById('lp').style.display = 'none'; document.getElementById('app').classList.remove('sh'); document.getElementById('pendingPage').style.display = 'flex' }
        async function checkSaved() { const t = localStorage.getItem('token'); if (!t) return; try { const r = await fetch(API_BASE + '/api/me?token=' + t); const d = await r.json(); if (d.loggedIn) { user = d.user; authToken = t; if (user.status === 'pending') showPending(); else openApp() } else localStorage.clear() } catch (e) { localStorage.clear() } }
        function doLogout() { user = null; authToken = null; localStorage.clear(); document.getElementById('lp').style.display = 'flex'; document.getElementById('app').classList.remove('sh'); document.getElementById('pendingPage').style.display = 'none'; if (ws) { ws.close(); ws = null } if (term) { term.dispose(); term = null } }
        function openApp() {
            document.getElementById('lp').style.display = 'none'; document.getElementById('pendingPage').style.display = 'none'; document.getElementById('app').classList.add('sh');
            document.getElementById('uN').textContent = user.username; document.getElementById('uR').textContent = user.role === 'owner' ? 'ðŸ‘‘ Owner' : 'User'; document.getElementById('uA').textContent = user.username[0].toUpperCase();
            if (user.role === 'owner') { document.getElementById('adminNav').style.display = ''; document.getElementById('dangerZone').style.display = 'none'; }
            else { document.getElementById('adminNav').style.display = 'none'; document.getElementById('dangerZone').style.display = ''; }
            if (user.status === 'pending') { const bar = document.getElementById('alertBar'); bar.className = 'alert-bar warning sh'; document.getElementById('alertMsg').textContent = 'âš ï¸ Your account will be auto-deleted in 6 hours if not approved. Contact admin.'; }
            document.getElementById('mhActions').innerHTML = '<button class="mh-btn" onclick="toggleTermFS()">' + (termFS ? 'â¬œ Normal' : 'â›¶ Fullscreen') + '</button><button class="mh-btn" onclick="refreshTerm()">ðŸ”„ Restart</button>';
            setTimeout(() => { initTerm(); lf(); lStats(); lRes(); loadAlertBanner() }, 300)
        }
        // ALERT BANNER
        async function loadAlertBanner() { try { const r = await fetch(API_BASE + '/api/alert'); const d = await r.json(); if (d.alert && d.alert.message) { const bar = document.getElementById('alertBar'); bar.className = 'alert-bar ' + (d.alert.type || 'warning') + ' sh'; document.getElementById('alertMsg').textContent = d.alert.message } } catch (e) { } }
        function closeAlert() { document.getElementById('alertBar').classList.remove('sh') }
        // NAV
        function sp(id, btn) {
            document.querySelectorAll('.pn').forEach(p => p.classList.remove('a')); document.querySelectorAll('.ni').forEach(n => n.classList.remove('a'));
            document.getElementById('p-' + id).classList.add('a'); if (btn) btn.classList.add('a');
            const t = { terminal: ['ðŸ’»', 'Terminal'], files: ['ðŸ“‚', 'Files'], settings: ['ðŸ“Š', 'Settings'], plans: ['ðŸ“‹', 'Plans'], contact: ['ðŸ“ž', 'Contact'], admin: ['ðŸ‘‘', 'Admin'] }; const v = t[id] || ['âš™ï¸', id];
            document.getElementById('pI').textContent = v[0]; document.getElementById('pT').textContent = v[1];
            // Header actions
            const ha = document.getElementById('mhActions');
            if (id === 'terminal') ha.innerHTML = '<button class="mh-btn" onclick="toggleTermFS()">' + (termFS ? 'â¬œ Normal' : 'â›¶ Fullscreen') + '</button><button class="mh-btn" onclick="refreshTerm()">ðŸ”„ Restart</button>';
            else if (id === 'files') ha.innerHTML = '<button class="mh-btn danger" style="color:var(--rd)" onclick="factoryReset()">ðŸ—‘ï¸ Factory Reset</button>';
            else ha.innerHTML = '';
            if (id === 'terminal' && fitA) setTimeout(() => fitA.fit(), 100); if (id === 'files') lf(); if (id === 'settings') { lStats(); loadCharts() } if (id === 'plans') loadPlans(); if (id === 'contact') loadContact(); if (id === 'admin') { if (user.role !== 'owner') { sp('terminal', document.querySelector('.ni')); return; } loadAdmin() }
        }
        // TERMINAL
        function initTerm() {
            if (term) return;
            term = new Terminal({ cursorBlink: true, fontSize: 13, fontFamily: '"Fira Code",monospace', theme: { background: '#06080f', foreground: '#e6edf3', cursor: '#6366f1', selectionBackground: 'rgba(99,102,241,.3)', black: '#1e293b', red: '#f85149', green: '#3fb950', yellow: '#d29922', blue: '#58a6ff', magenta: '#8b5cf6', cyan: '#06b6d4', white: '#e6edf3' } });
            fitA = new FitAddon.FitAddon(); term.loadAddon(fitA); term.open(document.getElementById('tbox')); setTimeout(() => fitA.fit(), 100);
            connectWS()
        }
        function connectWS() {
            if (ws) { try { ws.close() } catch (e) { } }
            // Dispose previous onData handler to prevent double-paste
            if (dataDisp) { dataDisp.dispose(); dataDisp = null; }
            // WS HF
            ws = new WebSocket('wss://evidzone-love.hf.space/ws/terminal?token=' + encodeURIComponent(authToken));
            ws.onopen = () => { const d = fitA.proposeDimensions(); if (d) ws.send(JSON.stringify({ type: 'resize', cols: d.cols, rows: d.rows })) };
            ws.onmessage = ev => term.write(ev.data); ws.onerror = () => term.write('\r\n\x1b[31m[Error]\x1b[0m\r\n'); ws.onclose = () => term.write('\r\n\x1b[31m[Disconnected]\x1b[0m\r\n');
            dataDisp = term.onData(d => { if (ws && ws.readyState === 1) ws.send(JSON.stringify({ type: 'input', data: d })) })
        }
        function refreshTerm() { if (term) { term.clear() } connectWS() }
        function toggleTermFS() {
            termFS = !termFS; const sb = document.querySelector('.sb'); const mh = document.querySelector('.mh'); if (termFS) { sb.style.display = 'none' } else { sb.style.display = '' }
            document.getElementById('mhActions').innerHTML = '<button class="mh-btn" onclick="toggleTermFS()">' + (termFS ? 'â¬œ Normal' : 'â›¶ Fullscreen') + '</button><button class="mh-btn" onclick="refreshTerm()">ðŸ”„ Restart</button>';
            setTimeout(() => { if (fitA) fitA.fit() }, 100)
        }
        window.addEventListener('resize', () => { if (fitA) { fitA.fit(); const d = fitA.proposeDimensions(); if (d && ws && ws.readyState === 1) ws.send(JSON.stringify({ type: 'resize', cols: d.cols, rows: d.rows })) } });
        // RESOURCES
        async function lRes() {
            try {
                const r = await api('/api/resources'); const d = await r.json();
                const sP = d.storage.limit === null || d.storage.limit > 1e15 ? 0 : d.storage.pct;
                document.getElementById('rbSt').textContent = fSz(d.storage.used) + (d.role === 'owner' ? ' / âˆž' : ' / ' + fSz(d.storage.limit));
                document.getElementById('rbSf').style.width = (d.role === 'owner' ? 0 : sP) + '%'; document.getElementById('rbSf').className = 'rb-fill' + (sP > 85 ? ' warn' : '');
                document.getElementById('rbRt').textContent = d.role === 'owner' ? 'Unlimited' : d.ram.limit + 'MB';
                document.getElementById('rbRf').style.width = d.role === 'owner' ? '0' : '40%';
                document.getElementById('rbCt').textContent = d.role === 'owner' ? 'Unlimited' : d.cpu.limit + ' Core';
                document.getElementById('rbCf').style.width = d.role === 'owner' ? '0' : '50%'
            } catch (e) { }
        }
        setInterval(() => { if (user) lRes() }, 15000);
        // FILES
        async function lf() { try { const r = await api('/api/files?path=' + encodeURIComponent(curPath)); const d = await r.json(); rBc(); rFl(d.files || []) } catch (e) { } }
        function rBc() { const el = document.getElementById('fP'); const p = ['~', ...curPath.split('/').filter(Boolean)]; el.innerHTML = p.map((x, i) => { const to = i === 0 ? '' : p.slice(1, i + 1).join('/'); return `<button class="fc" onclick="nav('${to}')">${x}</button>` }).join('<span style="color:var(--txd);margin:0 1px">/</span>') }
        function rFl(files) {
            const el = document.getElementById('fL'); if (!files.length) { el.innerHTML = '<div class="es"><span class="ei">ðŸ“­</span><p>Empty folder</p></div>'; return }
            el.innerHTML = files.map(f => {
                const ic = f.isDir ? 'ðŸ“' : fI(f.name), c = f.isDir ? 'd' : 'f', sz = f.isDir ? 'Folder' : fSz(f.size), fp = curPath ? curPath + '/' + f.name : f.name;
                const chk = selectMode ? `<div class="fi-check${selected.has(fp) ? ' checked' : ''}" onclick="event.stopPropagation();toggleSel('${fp}',this)">${selected.has(fp) ? 'âœ“' : ''}</div>` : '';
                const isZip = f.name.endsWith('.zip');
                return `<div class="fi${selected.has(fp) ? ' selected' : ''}" ${f.isDir ? `ondblclick="nav('${fp}')"` : ''}>${chk}<div class="fii ${c}">${ic}</div><div class="fin"><div class="fn">${f.name}</div><div class="fm">${sz}</div></div><div class="fa">${isZip ? `<button class="fab" onclick="event.stopPropagation();unzipFile('${fp}')" title="Unzip">ðŸ“¤</button>` : ''}<button class="fab" onclick="event.stopPropagation();zipFile('${fp}')" title="Zip">ðŸ“¦</button><button class="fab" onclick="event.stopPropagation();renameFile('${fp}','${f.name}')" title="Rename">âœï¸</button>${!f.isDir ? `<button class="fab" onclick="event.stopPropagation();dl('${fp}')" title="Download">â¬‡</button>` : ''}<button class="fab x" onclick="event.stopPropagation();del('${fp}','${f.name}')" title="Delete">âœ•</button></div></div>`
            }).join('')
        }
        function nav(p) { curPath = p; selected.clear(); updateBulk(); lf() }
        function fI(n) { const e = n.split('.').pop().toLowerCase(); return { js: 'ðŸ“œ', py: 'ðŸ', html: 'ðŸŒ', css: 'ðŸŽ¨', json: 'ðŸ“‹', zip: 'ðŸ“¦', png: 'ðŸ–¼ï¸', jpg: 'ðŸ–¼ï¸', mp4: 'ðŸŽ¬', txt: 'ðŸ“„', md: 'ðŸ“', sh: 'âš™ï¸' }[e] || 'ðŸ“„' }
        function upl(files) {
            if (!files || !files.length) return;
            const fd = new FormData(); fd.append('path', curPath); for (const f of files) fd.append('files', f);
            const overlay = document.getElementById('uplOverlay');
            const fill = document.getElementById('uplFill');
            const pct = document.getElementById('uplPct');
            overlay.classList.add('sh'); fill.style.width = '0'; pct.textContent = '0%';
            const xhr = new XMLHttpRequest();
            xhr.upload.onprogress = (ev) => { if (ev.lengthComputable) { const p = Math.round(ev.loaded / ev.total * 100); fill.style.width = p + '%'; pct.textContent = p + '%'; } };
            xhr.onload = () => { overlay.classList.remove('sh'); try { const d = JSON.parse(xhr.responseText); if (d.error) toast(d.error, 'error'); else toast('Uploaded!', 'success'); } catch (e) { toast('Uploaded!', 'success'); } lf(); lRes(); document.getElementById('finp').value = ''; };
            xhr.onerror = () => { overlay.classList.remove('sh'); toast('Upload failed', 'error'); document.getElementById('finp').value = ''; };
            xhr.open('POST', API_BASE + '/api/files/upload');
            if (authToken) xhr.setRequestHeader('X-Auth-Token', authToken);
            xhr.send(fd);
        }
        function hDr(e) { e.preventDefault(); e.currentTarget.classList.remove('ov'); upl(e.dataTransfer.files) }
        function sMk() { document.getElementById('mkM').classList.add('sh'); document.getElementById('mkN').value = ''; document.getElementById('mkN').focus() }
        function cMk() { document.getElementById('mkM').classList.remove('sh') }
        async function mkGo() { const n = document.getElementById('mkN').value.trim(); if (!n) return; const fp = curPath ? curPath + '/' + n : n; try { await api('/api/files/mkdir', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ path: fp }) }); cMk(); lf() } catch (e) { } }
        async function del(fp, n) { if (!confirm('Delete "' + n + '"?')) return; try { await api('/api/files?path=' + encodeURIComponent(fp), { method: 'DELETE' }); lf(); lRes() } catch (e) { } }
        function dl(fp) { window.open(API_BASE + '/api/files/download?path=' + encodeURIComponent(fp) + '&token=' + encodeURIComponent(authToken), '_blank') }
        async function unzipFile(fp) { try { const r = await api('/api/files/unzip', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ filePath: fp }) }); const d = await r.json(); if (d.error) toast(d.error, 'error'); else toast(d.message || 'Extracted!', 'success'); lf(); lRes() } catch (e) { toast('Unzip failed', 'error') } }
        async function zipFile(fp) { try { const r = await api('/api/files/zip', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ filePath: fp }) }); const d = await r.json(); if (d.error) toast(d.error, 'error'); else toast(d.message || 'Zipped!', 'success'); lf(); lRes() } catch (e) { toast('Zip failed', 'error') } }
        // RENAME
        function renameFile(fp, name) { renamePath = fp; document.getElementById('renameN').value = name; document.getElementById('renameM').classList.add('sh'); document.getElementById('renameN').focus(); document.getElementById('renameN').select() }
        async function renameGo() { const n = document.getElementById('renameN').value.trim(); if (!n) return; try { await api('/api/files/rename', { method: 'PUT', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ oldPath: renamePath, newName: n }) }); document.getElementById('renameM').classList.remove('sh'); toast('Renamed!', 'success'); lf() } catch (e) { toast('Rename failed', 'error') } }
        // SELECT MODE
        function toggleSelect() { selectMode = !selectMode; selected.clear(); updateBulk(); lf() }
        function toggleSel(fp, el) { if (selected.has(fp)) selected.delete(fp); else selected.add(fp); updateBulk(); lf() }
        function selectAll() { const items = document.querySelectorAll('.fi'); items.forEach(fi => { const fn = fi.querySelector('.fn'); if (fn) { const name = fn.textContent; const fp = curPath ? curPath + '/' + name : name; selected.add(fp) } }); updateBulk(); lf() }
        function updateBulk() { const bar = document.getElementById('bulkBar'); bar.className = 'bulk-bar' + (selectMode ? ' sh' : ''); document.getElementById('bulkCount').textContent = selected.size + ' selected' }
        async function bulkDelete() { if (!selected.size) return; if (!confirm('Delete ' + selected.size + ' items?')) return; try { await api('/api/files/bulk-delete', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ paths: [...selected] }) }); selected.clear(); updateBulk(); lf(); lRes() } catch (e) { } }
        function bulkMove() { if (!selected.size) return; document.getElementById('moveM').classList.add('sh'); document.getElementById('moveN').value = ''; document.getElementById('moveN').focus() }
        async function moveGo() { const dest = document.getElementById('moveN').value.trim(); try { await api('/api/files/move', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ sources: [...selected], destination: dest }) }); document.getElementById('moveM').classList.remove('sh'); selected.clear(); updateBulk(); toast('Moved!', 'success'); lf() } catch (e) { toast('Move failed', 'error') } }
        function bulkCopy() { if (!selected.size) return; document.getElementById('copyM').classList.add('sh'); document.getElementById('copyN').value = ''; document.getElementById('copyN').focus() }
        async function copyGo() { const dest = document.getElementById('copyN').value.trim(); try { await api('/api/files/copy', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ sources: [...selected], destination: dest }) }); document.getElementById('copyM').classList.remove('sh'); selected.clear(); updateBulk(); toast('Copied!', 'success'); lf(); lRes() } catch (e) { toast('Copy failed', 'error') } }
        async function factoryReset() { if (!confirm('âš ï¸ FACTORY RESET: This will delete ALL your files and restart your terminal. Are you sure?')) return; if (!confirm('This action CANNOT be undone. Type OK to confirm.')) return; try { await api('/api/files/reset', { method: 'POST', headers: { 'Content-Type': 'application/json' } }); lf(); lRes(); refreshTerm(); toast('Factory reset complete', 'success') } catch (e) { toast('Reset failed', 'error') } }
        // SETTINGS + CHARTS
        async function lStats() {
            try {
                const r = await api('/api/system'); const d = await r.json();
                let html = `<div class="sc"><div class="sl">ðŸŸ¢ Status</div><div class="sv">${d.status}</div><div class="ss">Plan: ${d.plan}</div></div>
<div class="sc"><div class="sl">â±ï¸ Uptime</div><div class="sv">${d.uptime}</div></div>
<div class="sc"><div class="sl">ðŸ§  RAM</div><div class="sv">${d.ramUsed} / ${d.ramTotal}</div><div class="ss">${d.ramPct || 0}% used</div></div>
<div class="sc"><div class="sl">âš¡ CPU</div><div class="sv">${d.cpuCores} Core${d.cpuCores > 1 ? 's' : ''}</div><div class="ss">${d.cpuPct || 0}%</div></div>
<div class="sc"><div class="sl">ðŸ’¾ Disk</div><div class="sv">${d.diskUsed} / ${d.diskTotal}</div><div class="ss">${d.diskPct || 0}% used</div></div>`;
                if (user && user.role === 'owner') html += `<div class="sc"><div class="sl">ðŸ‘¥ Users</div><div class="sv">${d.totalUsers}</div><div class="ss">${d.nodeVer}</div></div>
<div class="sc"><div class="sl">ðŸ“Š Load</div><div class="sv">${d.loadAvg}</div></div><div class="sc"><div class="sl">ðŸ–¥ï¸ Platform</div><div class="sv">${d.platform}</div></div>`;
                document.getElementById('sG').innerHTML = html
            } catch (e) { }
        }
        setInterval(() => { if (user) lStats() }, 30000);
        async function deleteAccount() {
            if (!confirm('Are you sure you want to DELETE your account? All files will be lost!')) return;
            if (!confirm('This CANNOT be undone. Confirm deletion?')) return;
            try { const r = await api('/api/account', { method: 'DELETE' }); const d = await r.json(); if (d.error) { toast(d.error, 'error'); return; } toast('Account deleted', 'success'); doLogout(); } catch (e) { toast('Failed', 'error'); }
        }
        async function loadCharts() {
            try {
                const r = await api('/api/stats/history'); const d = await r.json(); const h = d.history || [];
                const labels = h.map((_, i) => i); const cpuData = h.map(x => x.cpu); const ramData = h.map(x => x.ram); const diskData = h.map(x => x.disk);
                const opts = { responsive: true, maintainAspectRatio: true, scales: { y: { min: 0, max: 100, ticks: { color: '#7d8590', callback: v => v + '%' }, grid: { color: 'rgba(255,255,255,.05)' } }, x: { display: false } }, plugins: { legend: { display: false } }, elements: { line: { tension: .4, borderWidth: 2 }, point: { radius: 0 } } };
                if (cpuChart) { cpuChart.destroy() } cpuChart = new Chart(document.getElementById('cpuChart'), { type: 'line', data: { labels, datasets: [{ data: cpuData, borderColor: '#6366f1', backgroundColor: 'rgba(99,102,241,.1)', fill: true }] }, options: opts });
                if (ramChart) { ramChart.destroy() } ramChart = new Chart(document.getElementById('ramChart'), { type: 'line', data: { labels, datasets: [{ data: ramData, borderColor: '#3fb950', backgroundColor: 'rgba(63,185,80,.1)', fill: true }] }, options: opts });
                if (diskChart) { diskChart.destroy() } diskChart = new Chart(document.getElementById('diskChart'), { type: 'line', data: { labels, datasets: [{ data: diskData, borderColor: '#d29922', backgroundColor: 'rgba(210,153,34,.1)', fill: true }] }, options: opts });
            } catch (e) { }
        }
        // ADMIN
        function aTab(tab, btn) { document.querySelectorAll('.admin-tab').forEach(b => b.classList.remove('a')); btn.classList.add('a');['adminUsers', 'adminIps', 'adminAlerts', 'adminSupport'].forEach(id => { const el = document.getElementById(id); if (el) el.style.display = 'none'; }); document.getElementById('admin' + tab.charAt(0).toUpperCase() + tab.slice(1)).style.display = ''; if (tab === 'users') loadUsers(); if (tab === 'ips') loadIps(); if (tab === 'support') loadSupportConfig() }
        async function loadAdmin() { loadUsers(); loadIps() }
        async function loadSupportConfig() { try { const r = await fetch(API_BASE + '/api/support'); const d = await r.json(); document.getElementById('supportWA').value = d.whatsapp || ''; document.getElementById('supportTG').value = d.telegram || ''; } catch (e) { } }
        async function saveSupport() { try { const wa = document.getElementById('supportWA').value.trim(); const tg = document.getElementById('supportTG').value.trim(); await fetch(API_BASE + '/api/support', { method: 'PUT', headers: { 'Content-Type': 'application/json', 'X-Auth-Token': authToken }, body: JSON.stringify({ whatsapp: wa, telegram: tg }) }); toast('Support info saved!', 'success'); } catch (e) { toast('Failed to save', 'error'); } }
        // PLANS
        async function loadPlans() {
            const plans = [
                { id: 'free', name: 'Free', price: 'â‚¹40', storage: '500MB', ram: '280MB', cpu: '0.5 Core', color: '#6366f1' },
                { id: 'pro', name: 'Pro', price: 'â‚¹70', storage: '1GB', ram: '560MB', cpu: '1 Core', color: '#8b5cf6' },
                { id: 'ultra', name: 'Ultra', price: 'â‚¹150', storage: '2GB', ram: '1120MB', cpu: '2 Cores', color: '#ec4899' }
            ];
            let wa = '', tg = '';
            try { const r = await api('/api/support'); const d = await r.json(); wa = d.whatsapp || ''; tg = d.telegram || ''; } catch (e) { }
            const currentPlan = user ? (user.plan || 'free') : 'free';
            const grid = document.getElementById('planGrid');
            grid.innerHTML = plans.map(p => {
                const isCurrent = currentPlan === p.id;
                return `<div class="plan-card${isCurrent ? ' current' : ''}">
                    ${isCurrent ? '<span class="plan-badge">CURRENT</span>' : ''}
                    <h3>${p.name}</h3>
                    <div class="plan-price">${p.price}<span style="font-size:14px;-webkit-text-fill-color:var(--txd)">/month</span></div>
                    <ul class="plan-features">
                        <li>Storage: ${p.storage}</li>
                        <li>RAM: ${p.ram}</li>
                        <li>CPU: ${p.cpu}</li>
                    </ul>
                    ${isCurrent ? '<button class="plan-buy current-btn">âœ“ Current Plan</button>' : `<button class="plan-buy" onclick="showBuyPopup('${p.name}','${p.price}')">Buy Now â†’</button>`}
                </div>`;
            }).join('');
            // Store for popup
            window._supportWA = wa;
            window._supportTG = tg;
        }
        function showBuyPopup(planName, planPrice) {
            const msg = `Hi, I want to buy the ${planName} plan (${planPrice}/month) for my account: ${user ? user.username : ''} on iq4u8 SERVER`;
            const wa = window._supportWA || '';
            const tg = window._supportTG || '';
            if (!wa && !tg) { toast('No contact info set. Ask admin.', 'warning'); return; }
            const waLink = wa ? `https://wa.me/${wa.replace(/[^0-9]/g, '')}?text=${encodeURIComponent(msg)}` : '';
            const tgLink = tg ? `${tg.startsWith('http') ? tg : 'https://t.me/' + tg.replace('@', '')}?text=${encodeURIComponent(msg)}` : '';
            // Remove old popup
            const old = document.getElementById('buyPopup'); if (old) old.remove();
            const popup = document.createElement('div');
            popup.id = 'buyPopup';
            popup.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);z-index:9999;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(4px)';
            popup.innerHTML = `<div style="background:var(--bg2);border:1px solid var(--bdr);border-radius:16px;padding:24px;max-width:320px;width:90%;text-align:center">
                <h3 style="font-size:16px;font-weight:800;margin-bottom:4px">ðŸ“± Contact Us</h3>
                <p style="font-size:12px;color:var(--txd);margin-bottom:16px">Choose how to reach us for<br><strong>${planName} Plan (${planPrice}/month)</strong></p>
                <div style="display:flex;flex-direction:column;gap:10px">
                    ${waLink ? `<a href="${waLink}" target="_blank" style="text-decoration:none"><button style="width:100%;padding:12px;background:#25D366;border:none;border-radius:10px;color:#fff;font-family:inherit;font-size:14px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px">ðŸ’¬ WhatsApp</button></a>` : ''}
                    ${tgLink ? `<a href="${tgLink}" target="_blank" style="text-decoration:none"><button style="width:100%;padding:12px;background:#2AABEE;border:none;border-radius:10px;color:#fff;font-family:inherit;font-size:14px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px">âœˆï¸ Telegram</button></a>` : ''}
                </div>
                <button onclick="document.getElementById('buyPopup').remove()" style="margin-top:14px;padding:8px 20px;background:var(--inp);border:1px solid var(--bdr);border-radius:8px;color:var(--txd);font-family:inherit;font-size:12px;cursor:pointer">Close</button>
            </div>`;
            popup.addEventListener('click', e => { if (e.target === popup) popup.remove(); });
            document.body.appendChild(popup);
        }
        // CONTACT
        async function loadContact() {
            try {
                const r = await api('/api/support'); const d = await r.json();
                const cards = document.getElementById('contactCards');
                let html = '';
                if (d.whatsapp) html += `<a href="https://wa.me/${d.whatsapp.replace(/[^0-9]/g, '')}" target="_blank" class="contact-card"><div class="contact-icon wa">ðŸ’¬</div><div class="contact-info"><h4>WhatsApp</h4><p>${d.whatsapp}</p></div></a>`;
                if (d.telegram) html += `<a href="${d.telegram.startsWith('http') ? d.telegram : 'https://t.me/' + d.telegram.replace('@', '')}" target="_blank" class="contact-card"><div class="contact-icon tg">âœˆï¸</div><div class="contact-info"><h4>Telegram</h4><p>${d.telegram}</p></div></a>`;
                if (!html) html = '<p style="color:var(--txd);font-size:13px;text-align:center;padding:40px 0">No contact information set yet.<br>Ask the admin to configure support details.</p>';
                cards.innerHTML = html;
            } catch (e) { document.getElementById('contactCards').innerHTML = '<p style="color:var(--rd)">Failed to load</p>'; }
        }
        async function loadUsers() {
            try {
                const r = await api('/api/users'); const d = await r.json();
                document.getElementById('userTbody').innerHTML = (d.users || []).map(u => `<tr>
<td><strong>${u.username}</strong>${u.role === 'owner' ? ' ðŸ‘‘' : ''}</td>
<td><span class="status-badge ${u.status}">${u.status}</span></td>
<td>${u.price || 'â€”'}</td>
<td>${u.storageMB}MB / ${u.storageLimit}</td>
<td style="font-size:10px">${u.lastIP || 'â€”'}</td>
<td>${u.role !== 'owner' ? `<div style="display:flex;gap:3px;flex-wrap:wrap">${u.status === 'pending' ? `<button class="tbtn green" onclick="approveUser('${u.username}')">âœ“</button><button class="tbtn red" onclick="rejectUser('${u.username}')">âœ•</button>` : ''}
<button class="tbtn" onclick="showPlanModal('${u.username}')">ðŸ“‹</button>
<button class="tbtn" onclick="showPassModal('${u.username}')">ðŸ”‘</button>
<button class="tbtn red" onclick="deleteUser('${u.username}')">ðŸ—‘ï¸</button></div>` : ''}</td></tr>`).join('')
            } catch (e) { }
        }
        async function approveUser(u) { try { await api('/api/users/' + u + '/approve', { method: 'PUT' }); loadUsers() } catch (e) { } }
        async function rejectUser(u) { if (!confirm('Reject and delete "' + u + '"?')) return; try { await api('/api/users/' + u + '/reject', { method: 'PUT' }); loadUsers() } catch (e) { } }
        async function deleteUser(u) { if (!confirm('Delete user "' + u + '" and all their data?')) return; try { await api('/api/users/' + u, { method: 'DELETE' }); loadUsers() } catch (e) { } }
        function showPlanModal(u) { planUser = u; document.getElementById('planM').classList.add('sh') }
        async function changePlanGo() { const plan = document.getElementById('planSel').value; try { await api('/api/users/' + planUser + '/plan', { method: 'PUT', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ plan }) }); document.getElementById('planM').classList.remove('sh'); loadUsers() } catch (e) { } }
        function showPassModal(u) { passUser = u; document.getElementById('passM').classList.add('sh'); document.getElementById('passN').value = '' }
        async function passGo() { const pw = document.getElementById('passN').value; if (!pw || pw.length < 6) { toast('Password must be 6+ characters', 'warning'); return } try { await api('/api/users/' + passUser + '/password', { method: 'PUT', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ password: pw }) }); document.getElementById('passM').classList.remove('sh'); toast('Password updated', 'success') } catch (e) { } }
        // IP MANAGEMENT
        async function loadIps() { try { const r = await api('/api/ip/banned'); const d = await r.json(); document.getElementById('ipList').innerHTML = (d.ips || []).map(ip => `<li><span>${ip}</span><button class="tbtn red" onclick="unbanIp('${ip}')">Unban</button></li>`).join('') || '<li style="color:var(--txd)">No banned IPs</li>' } catch (e) { } }
        async function banIp() { const ip = document.getElementById('banIpInput').value.trim(); if (!ip) return; try { await api('/api/ip/ban', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ ip }) }); document.getElementById('banIpInput').value = ''; toast('IP banned', 'success'); loadIps() } catch (e) { toast('Ban failed', 'error') } }
        async function unbanIp(ip) { try { await api('/api/ip/unban', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ ip }) }); loadIps() } catch (e) { } }
        // ALERT MANAGEMENT
        async function setAlert() { const msg = document.getElementById('alertText').value.trim(); const type = document.getElementById('alertType').value; if (!msg) return; try { await api('/api/alert', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ message: msg, type }) }); toast('Alert set!', 'success'); loadAlertBanner() } catch (e) { } }
        async function clearAlert() { try { await api('/api/alert', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({}) }); document.getElementById('alertBar').classList.remove('sh'); document.getElementById('alertText').value = ''; toast('Alert cleared', 'success') } catch (e) { } }
        // INIT
        checkSaved();
    </script>
</body>

</html>
